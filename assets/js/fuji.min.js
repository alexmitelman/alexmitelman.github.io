"use strict";function getNowTheme(){let e=document.body.getAttribute("data-theme");return"auto"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"dark"===e?"dark":"light"}function updateUtterancesTheme(e){let t=getNowTheme();e&&("dark"===t?e.contentWindow.postMessage({type:"set-theme",theme:"photon-dark"},"https://utteranc.es"):e.contentWindow.postMessage({type:"set-theme",theme:"github-light"},"https://utteranc.es"))}function applyDarkAds(){document.getElementById("ethicalad").classList.add("dark")}function applyLightAds(){document.getElementById("ethicalad").classList.remove("dark")}function applyThemeForAds(){var e=localStorage.getItem("fuji_data-theme");"auto"===e&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||"dark"===e?applyDarkAds():applyLightAds()}function searchAll(e,t,o){let a=new Fuse(t,{shouldSort:!0,distance:1e4,keys:[{name:"title",weight:2},{name:"tags",weight:1.5},{name:"content",weight:1}]}),n=a.search(e);return n.length>0?(document.getElementById("search-result").innerHTML=template("search-result-template",n),[(new Date).getTime()-o,n.length]):"notFound"}document.querySelector("span.post-comment-notloaded")&&document.querySelector("span.post-comment-notloaded").addEventListener("click",loadComment),document.querySelector(".btn .btn-scroll-top").addEventListener("click",()=>{document.documentElement.scrollTop=0}),document.addEventListener("DOMContentLoaded",()=>{"function"==typeof mediumZoom&&mediumZoom(".img-zoomable",{margin:32,background:"#00000054",scrollOffset:128})}),document.querySelector(".btn .btn-toggle-mode").addEventListener("click",()=>{let e=getNowTheme(),t=document.body.getAttribute("data-theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";"auto"===t?(document.body.setAttribute("data-theme","light"===e?"dark":"light"),localStorage.setItem("fuji_data-theme","light"===e?"dark":"light"),applyThemeForAds()):"light"===t?(document.body.setAttribute("data-theme","dark"),applyDarkAds(),localStorage.setItem("fuji_data-theme","dark"===o?"auto":"dark")):(document.body.setAttribute("data-theme","light"),applyLightAds(),localStorage.setItem("fuji_data-theme","light"===o?"auto":"light")),applyThemeForAds();let a=document.querySelector(".post-comment");a&&document.querySelector("span.post-comment-notloaded").getAttribute("style")&&("utterances"===a.getAttribute("data-comment")&&updateUtterancesTheme(document.querySelector(".post-comment iframe")),"disqus"===a.getAttribute("data-comment")&&DISQUS.reset({reload:!0}))}),applyThemeForAds();let urlParams=new URLSearchParams(window.location.search);if(urlParams.has("s")){let e=(new Date).getTime(),t=document.querySelectorAll(".search-result-info"),o=urlParams.get("s");document.querySelector(".search-input input").setAttribute("value",o);let a=new XMLHttpRequest;a.open("GET","index.json",!0),a.responseType="json",a.onerror=(()=>{t[2].removeAttribute("style")}),a.ontimeout=(()=>{t[2].removeAttribute("style")}),a.onreadystatechange=(()=>{4===a.readyState&&(200===a.status?(e=searchAll(o,a.response,e),"notFound"===e?t[1].removeAttribute("style"):(t[0].innerHTML=t[0].innerHTML.replace("[TIME]",e[0]),t[0].innerHTML=t[0].innerHTML.replace("[NUM]",e[1]),t[0].removeAttribute("style"))):t[2].removeAttribute("style"))}),a.send(null)}const openMenu=document.getElementById("btn-menu");openMenu&&openMenu.addEventListener("click",()=>{const e=document.querySelector(".sidebar-mobile");e&&("none"===e.style.display?e.setAttribute("style","display: flex;"):e.setAttribute("style","display: none;"))});